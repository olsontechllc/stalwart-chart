Thank you for installing {{ .Chart.Name }}!

Your Stalwart Mail Server is being deployed in {{ .Release.Namespace }} namespace.

{{- if .Values.clustering.enabled }}

CLUSTER MODE ENABLED
--------------------
This deployment is running in cluster mode with {{ .Values.clustering.replicas }} replicas.
{{- else }}

SINGLE INSTANCE MODE
--------------------
This deployment is running in single instance mode with {{ .Values.replicaCount }} replica(s).
{{- end }}

To get the status of your deployment:

  kubectl get pods -n {{ .Release.Namespace }} -l app.kubernetes.io/instance={{ .Release.Name }}

To check the logs:

  kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/name={{ include "stalwart.name" . }} -f

{{- if eq .Values.service.type "LoadBalancer" }}

EXTERNAL ACCESS
---------------
Your mail server is exposed via a LoadBalancer service.

To get the external IP address:

  kubectl get svc -n {{ .Release.Namespace }} {{ include "stalwart.fullname" . }}

{{- else if eq .Values.service.type "NodePort" }}

EXTERNAL ACCESS
---------------
Your mail server is exposed via NodePort.

To get the NodePort:

  kubectl get svc -n {{ .Release.Namespace }} {{ include "stalwart.fullname" . }}

{{- end }}

{{- if .Values.stalwart.fallbackAdmin.enabled }}

FALLBACK ADMIN ACCOUNT
----------------------
⚠️  WARNING: Fallback admin account is ENABLED!

Username: admin
Password: (stored in secret {{ include "stalwart.fullname" . }})

To retrieve the admin password:

  kubectl get secret -n {{ .Release.Namespace }} {{ include "stalwart.fullname" . }} -o jsonpath='{.data.password}' | base64 -d

For security, disable the fallback admin after initial setup:

  helm upgrade {{ .Release.Name }} --set stalwart.fallbackAdmin.enabled=false

{{- end }}

TROUBLESHOOTING
---------------
Check TLS certificate status:

  kubectl get certificate -n {{ .Release.Namespace }} {{ include "stalwart.fullname" . }}-tls

{{- if .Values.fdbClientCert.enabled }}

Check FDB client certificate status:

  kubectl get certificate -n {{ .Release.Namespace }} {{ .Values.fdbClientCert.certificate.name }}

{{- end }}

View configuration:

  kubectl get configmap -n {{ .Release.Namespace }} {{ include "stalwart.fullname" . }} -o yaml

Check resource status:

  kubectl describe pod -n {{ .Release.Namespace }} -l app.kubernetes.io/name={{ include "stalwart.name" . }}

NEXT STEPS
----------
1. Verify pods are running and ready
2. Configure DNS records to point to your mail server IP
3. Set up MX, SPF, DKIM, and DMARC records for your domain
4. Access the web admin interface at https://{{ .Values.stalwart.defaultHostname }}
5. Create user accounts and configure mail domains
6. Test SMTP, IMAP, and webmail connectivity

For more information:
- Stalwart Documentation: https://stalw.art/docs/
- Chart Configuration: See values.yaml for all available options
- GitHub Issues: Report problems or request features
